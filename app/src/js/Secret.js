import store from '../store'

export default class Secret {
    constructor() {
        this.loveTougne = ""
        this.secrets = [
            'ä½ ä¸å–œæ¬¢çŒ«çŒ«ç‹—ç‹—,æˆ‘å¾ˆå–œæ¬¢,ä½ ç»å¸¸è¯´,è·Ÿä½ åœ¨ä¸€èµ·ä»¥å,æˆ‘è¿™è¾ˆå­éƒ½ä¸ä¼šæœ‰è‡ªå·±çš„å® ç‰©äº†,ä½†æ˜¯æˆ‘ä¸åæ‚”,å› ä¸º..........æœ‰ä½ å°±å¤Ÿäº†ğŸ’—',
            'æœ€å–œæ¬¢ä½ çš„ä¸€ç‚¹,ä¸ç®¡åµæ¶,ä¸å¼€å¿ƒ,é—¹çŸ›ç›¾,ä»æ¥ä¸ä¼šå¤±è”,å†ç”Ÿæ°”ä¹Ÿä¼šä¸»åŠ¨è”ç³»æˆ‘,è°¢è°¢é‚£ä¹ˆä¹…ä»¥æ¥çš„åŒ…å®¹ğŸ˜Š',
            'éƒ½è¯´ç¨‹åºçŒ¿ä¸æ‡‚æµªæ¼«,æˆ‘æƒ³,æˆ–è®¸è¿™å°±æ˜¯ç¨‹åºçŒ¿çš„æµªæ¼«å§...ğŸŒ¸',
            'æ˜æ˜ä¸æ“…é•¿ç®—æœ¯,è¿˜è¦åšæŒåšç®—æœ¯ç›¸å…³çš„å·¥ä½œ,å¦‚æœè¯´è¿™ä¸ªé¡¹ç›®æ˜¯ç¨‹åºçŒ¿æœ€åçš„å€”å¼ºï¼Œé‚£ä½ çš„èŒä¸šé€‰æ‹©ä¼°è®¡ä¹Ÿæ˜¯ä½ æœ€åçš„å€”å¼ºäº†å§,ä¸ç®¡æ˜¯å¥½æ˜¯å,åŠªåŠ›è¿‡å°±å¥½å•¦,åŠ æ²¹å§,çš®ä¸˜ğŸ‰',
            `æˆ‘ä»¬å·²ç»ç›¸çˆ±${this.getKnowTime()}å¤©å•¦!è¦ä¸€ç›´å¹¸ç¦ä¸‹å»å™¢ğŸ’—`,
            this.getMarryTime() > 0 ? `è¿˜æœ‰${this.getMarryTime()}å¤©,æˆ‘ä»¬å°±è¦ç»“å©šå•¦!è¦è®©æ‰€æœ‰äººè§è¯æˆ‘ä»¬çš„å¹¸ç¦å‘€ğŸ’—` : `æˆ‘ä»¬å·²ç»ç»“å©šå•¦!è¦ä¸€ç›´å¹¸ç¦ä¸‹å»,ç›´åˆ°æ°¸è¿œå™¢ğŸŒ¸`,
            'è™½ç„¶æˆ‘å¾ˆæ€‚,ä¸€ç›´éƒ½æ€‚.....æœ€å¤§èƒ†çš„ä¸€æ¬¡,å°±æ˜¯æƒ³è®©å…¨ä¸–ç•Œéƒ½çœ‹åˆ°æˆ‘å¯¹ä½ çš„å‘Šç™½ğŸ',
            'ä½ æœ€å–œæ¬¢çš„æ•°å­—æ˜¯369,å‘ä¸ªåŠ¨æ€éƒ½è¦ç­‰åˆ†é’ˆæŒ‡å‘369æ‰å‘,æœ‰çš„æ—¶å€™è§‰å¾—å¾ˆå‚»,æœ‰æ—¶å€™åˆè§‰å¾—ç‰¹åˆ«å¯çˆ±ğŸ„',
            'ç¬¬ä¸€æ¬¡å»è¿ªå£«å°¼çš„æ—¶å€™,ä½ æˆ´ç€ä»™å¥³å‘ç®,æˆ‘ä»¬æ‹äº†å¾ˆå¤šå¾ˆå¤šç…§ç‰‡,å½“æ—¶æˆ‘çš„åœ¨æƒ³,å¦‚æœè¿™å°±æ˜¯æ˜¯ç°å®ä¸­çš„åŸå ¡,é‚£ä½ ä¸€å®šå°±æ˜¯æˆ‘çš„å…¬ä¸»äº†å§ğŸ‘°',
        ]
        this.badMemory = [
            'è¿˜è®°å¾—é‚£æ¬¡åœ¨åœè½¦åœºå“­,ä»¥åä¸æƒ³å†å‘ç”Ÿäº†ğŸ˜ª',
            'å»éŸ©å›½çš„æ—¶å€™,æ˜æ˜è¯´è¦å¸¦æˆ‘å»ç‰›å²›ç©,ç»“æœ.......è¿˜æ˜¯åœ¨å±¡æ¬¡ä¸å¼€å¿ƒä¹‹ååœ¨æˆ‘çš„å¸¦é¢†ä¸‹æ¥åˆ°äº†ç‰›å²›ğŸ‚',
        ]
        this.blue = [
            'è¿˜è®°å¾—åˆšå¼€å§‹çš„æ—¶å€™å¤§éƒ¨åˆ†æ—¶å€™éƒ½å¯ä»¥åœ¨è‹å·é™ªç€ä½ ,åº¦è¿‡äº†æˆ‘ä»¬äººç”Ÿä¸­å¾ˆå¿«ä¹çš„ä¸€æ®µæ—¶é—´,å¥½æ™¯ä¸é•¿,å¾ˆå¿«å°±å¼‚åœ°äº†,åˆ†å¼€çš„æ—¶å€™å¶å°”ä¼šæƒ³å¿µå¯¹æ–¹,ä½†æ›´å¤šçš„æ˜¯å¯¹æœªæ¥ç¾å¥½çš„æœŸå¾…..ğŸ¦',
        ]
    }

    bind(object, func) {
        return function () {
            return func.apply(object, arguments);
        }
    }

    speak(id, i = 0) {
        let str = '';
        if (id === 0) {
            str = "æ‰€ä»¥..............................ä½ æ„¿æ„å«ç»™æˆ‘å—ï¼Ÿ"
        }
        else if (id > 0 && id <= 10) {
            str = this.badMemory[id % this.badMemory.length];
        }
        else if (id > 10 && id <= 20) {
            str = this.blue[id % this.blue.length];
        }
        else {
            str = this.secrets[id % this.secrets.length];
        }
        if (i <= str.length) {
            store.dispatch('setSecret', str.slice(0, i++) + '_')
            const timer = setTimeout(this.bind(this, this.speak), Math.random() * 400, id, i)
            store.dispatch('setTimer', timer)
        } else {
            store.dispatch('setSecret', str)
        }
    }

    getKnowTime() {
        var start = new Date(2018, 1, 26);
        var end = new Date();
        var delta = end.getTime() - start.getTime();
        return Math.floor(delta / (24 * 3600 * 1000)) + 30
    }

    getMarryTime() {
        var marry = new Date(2019, 11, 24);
        var start = new Date();
        var delta = marry.getTime() - start.getTime();
        return Math.ceil(delta / (24 * 3600 * 1000)) - 30
    }
}
